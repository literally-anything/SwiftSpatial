{"abstract":[{"type":"text","text":"Test if "},{"type":"codeVoice","code":"self"},{"type":"text","text":" and "},{"type":"codeVoice","code":"other"},{"type":"text","text":" are approximately equal."}],"metadata":{"role":"symbol","required":true,"externalID":"s:12SwiftSpatial22ApproximatelyEquatableP02isC5Equal2to17relativeToleranceSbx_9MagnitudeQztF","title":"isApproximatelyEqual(to:relativeTolerance:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"isApproximatelyEqual"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"to"},{"kind":"text","text":": "},{"text":"Self","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"externalParam","text":"relativeTolerance"},{"text":": ","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:12SwiftSpatial22ApproximatelyEquatableP9MagnitudeQa","text":"Magnitude","kind":"typeIdentifier"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"}],"roleHeading":"Instance Method","symbolKind":"method","modules":[{"name":"SwiftSpatial"}]},"sections":[],"kind":"symbol","primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"isApproximatelyEqual","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"to"},{"text":" ","kind":"text"},{"kind":"internalParam","text":"other"},{"kind":"text","text":": "},{"text":"Self","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"relativeTolerance","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"kind":"text","text":"."},{"text":"Magnitude","preciseIdentifier":"s:12SwiftSpatial22ApproximatelyEquatableP9MagnitudeQa","kind":"typeIdentifier","identifier":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable\/Magnitude"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"parameters","parameters":[{"name":"other","content":[{"inlineContent":[{"text":"The value to which ","type":"text"},{"code":"self","type":"codeVoice"},{"type":"text","text":" is compared."}],"type":"paragraph"}]},{"name":"relativeTolerance","content":[{"inlineContent":[{"type":"text","text":"The tolerance to use for the comparison."},{"text":" ","type":"text"},{"text":"Defaults to ","type":"text"},{"code":".ulpOfOne.squareRoot()","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This value should be non-negative and less than or equal to 1."},{"type":"text","text":" "},{"text":"This constraint on is only checked in debug builds, because a","type":"text"},{"type":"text","text":" "},{"text":"mathematically well-defined result exists for any tolerance,","type":"text"},{"text":" ","type":"text"},{"text":"even one out of range.","type":"text"}]}]}]},{"content":[{"level":2,"type":"heading","text":"Discussion","anchor":"discussion"},{"inlineContent":[{"type":"codeVoice","code":"true"},{"type":"text","text":" if "},{"code":"self","type":"codeVoice"},{"type":"text","text":" and "},{"code":"other","type":"codeVoice"},{"text":" are equal, or if they are finite and","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":null,"code":["norm(self - other) <= relativeTolerance * scale"]},{"inlineContent":[{"type":"text","text":"where "},{"type":"codeVoice","code":"scale"},{"type":"text","text":" is"}],"type":"paragraph"},{"type":"codeListing","syntax":null,"code":["max(norm(self), norm(other), .leastNormalMagnitude)"]},{"type":"paragraph","inlineContent":[{"text":"The default value of ","type":"text"},{"type":"codeVoice","code":"relativeTolerance"},{"type":"text","text":" is "},{"code":".ulpOfOne.squareRoot()","type":"codeVoice"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"which corresponds to expecting “about half the digits” in the computed"},{"text":" ","type":"text"},{"text":"results to be good. This is the usual guidance in numerical analysis,","type":"text"},{"text":" ","type":"text"},{"text":"if you don’t know anything about the computation being performed, but","type":"text"},{"type":"text","text":" "},{"text":"is not suitable for all use cases.","type":"text"}]},{"inlineContent":[{"text":"Mathematical Properties:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"code":"isApproximatelyEqual(to:relativeTolerance:norm:)","type":"codeVoice"},{"type":"text","text":" is "},{"inlineContent":[{"text":"reflexive","type":"text"}],"type":"emphasis"},{"type":"text","text":" for"},{"type":"text","text":" "},{"type":"text","text":"non-exceptional values (such as NaN)."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"isApproximatelyEqual(to:relativeTolerance:norm:)","type":"codeVoice"},{"text":" is ","type":"text"},{"inlineContent":[{"text":"symmetric","type":"text"}],"type":"emphasis"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"isApproximatelyEqual(to:relativeTolerance:norm:)","type":"codeVoice"},{"type":"text","text":" is "},{"type":"strong","inlineContent":[{"text":"not","type":"text"}]},{"text":" ","type":"text"},{"inlineContent":[{"text":"transitive","type":"text"}],"type":"emphasis"},{"text":". Because of this, approximately equality is ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"not an"},{"text":" ","type":"text"},{"type":"text","text":"equivalence relation"}]},{"text":", even when restricted to non-exceptional values.","type":"text"}]},{"inlineContent":[{"text":"This means that you must not use approximate equality to implement","type":"text"},{"type":"text","text":" "},{"text":"a conformance to Equatable, as it will violate the invariants of","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"code written against that protocol."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For any point "},{"type":"codeVoice","code":"a"},{"type":"text","text":", the set of values that compare approximately equal"},{"text":" ","type":"text"},{"text":"to ","type":"text"},{"code":"a","type":"codeVoice"},{"text":" is ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"convex","type":"text"}]},{"type":"text","text":". (Under the assumption that the "},{"type":"codeVoice","code":".magnitude"},{"type":"text","text":" "},{"type":"text","text":"property implements a valid norm.)"}]}]},{"content":[{"inlineContent":[{"code":"isApproximatelyEqual(to:relativeTolerance:norm:)","type":"codeVoice"},{"type":"text","text":" is "},{"inlineContent":[{"type":"text","text":"scale invariant"}],"type":"emphasis"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"so long as no underflow or overflow has occured, and no exceptional","type":"text"},{"type":"text","text":" "},{"type":"text","text":"value is produced by the scaling."}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"See also ","type":"text"},{"type":"codeVoice","code":"isApproximatelyEqual(to:absoluteTolerance:[relativeTolerance:norm:])"},{"type":"text","text":"."}],"type":"paragraph"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial","doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable"]]},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable\/isApproximatelyEqual(to:relativeTolerance:)","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/swiftspatial\/approximatelyequatable\/isapproximatelyequal(to:relativetolerance:)"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://SwiftSpatial/documentation/SwiftSpatial/ApproximatelyEquatable":{"title":"ApproximatelyEquatable","role":"symbol","type":"topic","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"ApproximatelyEquatable","kind":"identifier"}],"url":"\/documentation\/swiftspatial\/approximatelyequatable","navigatorTitle":[{"text":"ApproximatelyEquatable","kind":"identifier"}],"identifier":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable","kind":"symbol","abstract":[]},"doc://SwiftSpatial/documentation/SwiftSpatial/ApproximatelyEquatable/Magnitude":{"abstract":[],"required":true,"identifier":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable\/Magnitude","fragments":[{"text":"associatedtype","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Magnitude","kind":"identifier"},{"text":" : ","kind":"text"},{"text":"FloatingPoint","kind":"typeIdentifier","preciseIdentifier":"s:SF"}],"role":"symbol","title":"Magnitude","kind":"symbol","type":"topic","url":"\/documentation\/swiftspatial\/approximatelyequatable\/magnitude"},"doc://SwiftSpatial/documentation/SwiftSpatial/ApproximatelyEquatable/isApproximatelyEqual(to:relativeTolerance:)":{"abstract":[{"type":"text","text":"Test if "},{"type":"codeVoice","code":"self"},{"text":" and ","type":"text"},{"type":"codeVoice","code":"other"},{"type":"text","text":" are approximately equal."}],"type":"topic","required":true,"url":"\/documentation\/swiftspatial\/approximatelyequatable\/isapproximatelyequal(to:relativetolerance:)","identifier":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial\/ApproximatelyEquatable\/isApproximatelyEqual(to:relativeTolerance:)","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"isApproximatelyEqual"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"to"},{"text":": ","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"kind":"text","text":", "},{"text":"relativeTolerance","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"text":"Magnitude","kind":"typeIdentifier","preciseIdentifier":"s:12SwiftSpatial22ApproximatelyEquatableP9MagnitudeQa"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:Sb","kind":"typeIdentifier","text":"Bool"}],"title":"isApproximatelyEqual(to:relativeTolerance:)","kind":"symbol"},"doc://SwiftSpatial/documentation/SwiftSpatial":{"title":"SwiftSpatial","abstract":[],"url":"\/documentation\/swiftspatial","kind":"symbol","type":"topic","identifier":"doc:\/\/SwiftSpatial\/documentation\/SwiftSpatial","role":"collection"}}}